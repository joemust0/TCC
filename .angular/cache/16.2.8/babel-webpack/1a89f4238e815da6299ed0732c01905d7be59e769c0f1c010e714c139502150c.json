{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../info-lancamento/info-lancamento.component\";\nconst _c0 = [\"btnNovo\"];\nconst _c1 = [\"criarBalanco\"];\nconst _c2 = [\"tabelaB\"];\nconst _c3 = function (a0) {\n  return {\n    \"ocultar\": a0\n  };\n};\nconst _c4 = function () {\n  return [\"tipo\", \"conta\", \"valor\"];\n};\nexport let BalancosComponent = /*#__PURE__*/(() => {\n  class BalancosComponent {\n    constructor(router, route) {\n      this.router = router;\n      this.route = route;\n      this.lancamentosAtivoCirculante = [];\n      this.lancamentosAtivoNCirculante = [];\n      this.lancamentosPassivoCirculante = [];\n      this.lancamentosPassivoNCirculante = [];\n      this.lancamentosPatrimonioLiquido = [];\n      this.lancamentos = [];\n      this.nome = '';\n      this.descricao = '';\n      this.mostrarBalanco = false;\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(() => {\n        this.atualizarVisibilidade();\n      });\n    }\n    atualizarVisibilidade() {\n      if (this.oc && this.ap && this.tabelaB) {\n        const urlAtual = this.router.url;\n        const mostrarTabela = urlAtual === '/balanço' && this.mostrarBalanco;\n        this.oc.nativeElement.classList.toggle('ocultar', mostrarTabela);\n        this.ap.nativeElement.classList.toggle('ocultar', mostrarTabela);\n        this.tabelaB.nativeElement.classList.toggle('ocultar', !mostrarTabela);\n      }\n    }\n    newBalanco() {\n      console.log(\"Nome: \" + this.nome);\n      console.log(\"Descrição: \" + this.descricao);\n      // Envia os dados para a tela de lançamentos e navega para lá\n      this.router.navigate(['/lançamentos'], {\n        state: {\n          nome: this.nome,\n          descricao: this.descricao\n        }\n      });\n    }\n    nBalanco() {\n      if (this.oc && this.ap) {\n        this.oc.nativeElement.classList.add('ocultar');\n        this.ap.nativeElement.classList.remove('ocultar');\n        console.log(\"nBanalano aqui\");\n      }\n    }\n    gerarBalanco() {\n      this.mostrarBalanco = true;\n    }\n    ngAfterViewInit() {\n      this.atualizarVisibilidade();\n    }\n    getTotalAtivos() {\n      return this.getAtivoCirculante() + this.getAtivoNCirculante();\n    }\n    getTotalPassivos() {\n      return this.getPassivoCirculante() + this.getPassivoNCirculante() + this.getPatrimonioLiquido();\n    }\n    getAtivoCirculante() {\n      const debito = this.lancamentos.filter(lanc => lanc.tipo === 'Débito' && (lanc.conta === 'Caixa' || lanc.conta === 'Banco' || lanc.conta === 'Estoque')).reduce((acc, curr) => acc + curr.valor, 0);\n      const credito = this.lancamentos.filter(lanc => lanc.tipo === 'Crédito' && (lanc.conta === 'Caixa' || lanc.conta === 'Banco' || lanc.conta === 'Estoque')).reduce((acc, curr) => acc + curr.valor, 0);\n      return debito - credito;\n    }\n    getAtivoNCirculante() {\n      const debito = this.lancamentos.filter(lanc => lanc.tipo === 'Débito' && (lanc.conta === 'Imobilizado' || lanc.conta === 'Estoque')).reduce((acc, curr) => acc + curr.valor, 0);\n      const credito = this.lancamentos.filter(lanc => lanc.tipo === 'Crédito' && (lanc.conta === 'Imobilizado' || lanc.conta === 'Estoque')).reduce((acc, curr) => acc + curr.valor, 0);\n      return debito - credito;\n    }\n    getPassivoCirculante() {\n      const credito = this.lancamentos.filter(lanc => lanc.tipo === 'Crédito' && (lanc.conta === 'Fornecedor' || lanc.conta === 'Empréstimo')).reduce((acc, curr) => acc + curr.valor, 0);\n      const debito = this.lancamentos.filter(lanc => lanc.tipo === 'Débito' && (lanc.conta === 'Fornecedor' || lanc.conta === 'Empréstimo')).reduce((acc, curr) => acc + curr.valor, 0);\n      return credito - debito;\n    }\n    getPassivoNCirculante() {\n      const credito = this.lancamentos.filter(lanc => lanc.tipo === 'Crédito' && (lanc.conta === 'Fornecedor' || lanc.conta === 'Empréstimo')).reduce((acc, curr) => acc + curr.valor, 0);\n      const debito = this.lancamentos.filter(lanc => lanc.tipo === 'Débito' && (lanc.conta === 'Fornecedor' || lanc.conta === 'Empréstimo')).reduce((acc, curr) => acc + curr.valor, 0);\n      return credito - debito;\n    }\n    getPatrimonioLiquido() {\n      const credito = this.lancamentos.filter(lanc => lanc.tipo === 'Crédito' && lanc.conta === 'Capital Social') || [];\n      const debito = this.lancamentos.filter(lanc => lanc.tipo === 'Débito' && lanc.conta === 'Capital Social') || [];\n      const creditoTotal = credito.reduce((acc, curr) => acc + (curr.valor || 0), 0);\n      const debitoTotal = debito.reduce((acc, curr) => acc + (curr.valor || 0), 0);\n      return creditoTotal - debitoTotal;\n    }\n    static #_ = this.ɵfac = function BalancosComponent_Factory(t) {\n      return new (t || BalancosComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BalancosComponent,\n      selectors: [[\"app-balancos\"]],\n      viewQuery: function BalancosComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(_c2, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.oc = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ap = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tabelaB = _t.first);\n        }\n      },\n      inputs: {\n        lancamentosAtivoCirculante: \"lancamentosAtivoCirculante\",\n        lancamentosAtivoNCirculante: \"lancamentosAtivoNCirculante\",\n        lancamentosPassivoCirculante: \"lancamentosPassivoCirculante\",\n        lancamentosPassivoNCirculante: \"lancamentosPassivoNCirculante\",\n        lancamentosPatrimonioLiquido: \"lancamentosPatrimonioLiquido\",\n        lancamentos: \"lancamentos\"\n      },\n      decls: 60,\n      vars: 24,\n      consts: [[\"id\", \"novoBalanco\"], [1, \"btn-novo\"], [\"btnNovoDiv\", \"\"], [1, \"btn-novo\", 3, \"click\"], [\"btnNovo\", \"\"], [1, \"bx\", \"bx-plus-circle\"], [1, \"criarBalanco\", \"ocultar\"], [\"criarBalanco\", \"\"], [\"for\", \"nome\"], [\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Digite seu texto\", \"name\", \"name\", \"required\", \"\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"rows\", \"6\", \"cols\", \"50\", \"placeholder\", \"Digite a descri\\u00E7\\u00E3o do balan\\u00E7o\"], [1, \"novo-balanco\", 3, \"click\"], [1, \"balanco-table\", \"ocultar\", 3, \"ngClass\"], [\"tabelaB\", \"\"], [\"border\", \"\", \"id\", \"Graf-Balan\\u00E7o\"], [\"colspan\", \"8\", \"align\", \"center\", \"id\", \"Balan\\u00E7o\"], [\"align\", \"center\"], [\"colspan\", \"2\", \"id\", \"Padr\\u00E3o\"], [\"id\", \"Ativo-Circulante\"], [\"id\", \"Passivo-Circulante\"], [\"colspan\", \"2\"], [3, \"lancamentos\", \"columnsToShow\"], [\"colspan\", \"4\"], [\"colspan\", \"4\", \"align\", \"center\"]],\n      template: function BalancosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1, 2)(3, \"label\");\n          i0.ɵɵtext(4, \"Criar novo balan\\u00E7o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(5, \"br\");\n          i0.ɵɵelementStart(6, \"button\", 3, 4);\n          i0.ɵɵlistener(\"click\", function BalancosComponent_Template_button_click_6_listener() {\n            return ctx.nBalanco();\n          });\n          i0.ɵɵelement(8, \"i\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 6, 7)(11, \"label\", 8);\n          i0.ɵɵtext(12, \"Nome do balan\\u00E7o:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"br\")(14, \"input\", 9)(15, \"br\")(16, \"br\");\n          i0.ɵɵelementStart(17, \"label\", 10);\n          i0.ɵɵtext(18, \"Descri\\u00E7\\u00E3o:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"br\")(20, \"textarea\", 11)(21, \"br\");\n          i0.ɵɵelementStart(22, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function BalancosComponent_Template_button_click_22_listener() {\n            return ctx.newBalanco();\n          });\n          i0.ɵɵtext(23, \"Criar Balan\\u00E7o\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"div\", 13, 14)(26, \"table\", 15)(27, \"tr\")(28, \"th\", 16);\n          i0.ɵɵtext(29, \"Balan\\u00E7o Patrimonial\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(30, \"tr\", 17)(31, \"td\", 18)(32, \"div\", 19)(33, \"p\");\n          i0.ɵɵtext(34, \"Ativo Circulante\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(35, \"td\", 18)(36, \"div\", 20)(37, \"p\");\n          i0.ɵɵtext(38, \"Passivo Circulante\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(39, \"tr\")(40, \"td\", 21);\n          i0.ɵɵelement(41, \"app-info-lancamento\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"td\", 21);\n          i0.ɵɵelement(43, \"app-info-lancamento\", 22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(44, \"tr\")(45, \"td\", 21);\n          i0.ɵɵelement(46, \"app-info-lancamento\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(47, \"td\", 21);\n          i0.ɵɵelement(48, \"app-info-lancamento\", 22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(49, \"tr\")(50, \"td\", 21);\n          i0.ɵɵelement(51, \"app-info-lancamento\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(52, \"td\", 23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"tr\")(54, \"td\", 24);\n          i0.ɵɵtext(55);\n          i0.ɵɵpipe(56, \"currency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"td\", 24);\n          i0.ɵɵtext(58);\n          i0.ɵɵpipe(59, \"currency\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(24);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c3, !ctx.mostrarBalanco));\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"lancamentos\", ctx.lancamentosAtivoCirculante)(\"columnsToShow\", i0.ɵɵpureFunction0(19, _c4));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"lancamentos\", ctx.lancamentosPassivoCirculante)(\"columnsToShow\", i0.ɵɵpureFunction0(20, _c4));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"lancamentos\", ctx.lancamentosAtivoNCirculante)(\"columnsToShow\", i0.ɵɵpureFunction0(21, _c4));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"lancamentos\", ctx.lancamentosPassivoNCirculante)(\"columnsToShow\", i0.ɵɵpureFunction0(22, _c4));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"lancamentos\", ctx.lancamentosPatrimonioLiquido)(\"columnsToShow\", i0.ɵɵpureFunction0(23, _c4));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"Total Ativos: \", i0.ɵɵpipeBind1(56, 13, ctx.getTotalAtivos()), \"\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Total Passivos: \", i0.ɵɵpipeBind1(59, 15, ctx.getTotalPassivos()), \"\");\n        }\n      },\n      dependencies: [i2.NgClass, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i4.InfoLancamentoComponent, i2.CurrencyPipe],\n      styles: [\"button[_ngcontent-%COMP%]{border:none;background:none;align-items:center;cursor:pointer}i[_ngcontent-%COMP%]{font-size:50px}.ocultar[_ngcontent-%COMP%]{display:none}.btn-novo[_ngcontent-%COMP%]{align-items:center;position:relative;justify-content:center;align-content:center;border:none;outline:none}.btn-novo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:36px}.btn-novo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:white;border-radius:50px;margin-left:100px;box-shadow:2px 2px #000}.novo-balanco[_ngcontent-%COMP%]{justify-content:center;align-items:center;background-color:#87ceeb;border-radius:12px;box-shadow:-2px 2px red;width:150px;margin-left:70px;margin-top:10px;margin-bottom:10px;padding:5px;font-size:20px}textarea[_ngcontent-%COMP%]   .Description[_ngcontent-%COMP%]{border-radius:15px}.form-wrapper[_ngcontent-%COMP%]{display:flex}.balanco-info[_ngcontent-%COMP%]{flex:1;margin-right:20px}.balanco-table[_ngcontent-%COMP%]{flex:2}\"]\n    });\n  }\n  return BalancosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}